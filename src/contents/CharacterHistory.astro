---
import Card from "@/components/Card.astro";
import Mapbox from "./history/HistoryMap.vue";
import HistoryMapCard from "./history/details/HistoryMapCard.vue";
import type { Step } from "./history/types.ts";
import HistoryTimeline from "./history/HistoryTimeline.vue";
import schoolIcon from "@/icons/School.svg?raw";
import workIcon from "@/icons/Work.svg?raw";
import Scroller from "@/components/client/Scroller.vue";

const steps: Step[] = [
  // Marianopolis College
  {
    label: "Marianopolis College",
    coordinate: { lat: 45.4812462, lng: -73.6115655 },
    description: "Lorem ipsum dolor amet",
    icon: schoolIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // UWaterloo
  {
    label: "University of Waterloo",
    coordinate: { lat: 43.4723, lng: -80.5449 },
    description: "Lorem ipsum dolor amet",
    icon: schoolIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Paramount Commerce
  {
    label: "Paramount Commerce",
    coordinate: { lat: 43.64365, lng: -79.40406 },
    description: "Lorem ipsum dolor amet",
    icon: workIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Bunch.live
  {
    label: "Bunch.live",
    coordinate: { lat: 45.36378, lng: -73.29989 },
    description: "Lorem ipsum dolor amet",
    icon: workIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Lifion by ADP
  {
    label: "Lifion by ADP",
    coordinate: { lat: 40.65705, lng: -73.98173 },
    description: "Lorem ipsum dolor amet",
    icon: workIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Chalmers
  {
    label: "Chalmers Universitat",
    coordinate: { lat: 57.6898, lng: 11.9742 },
    description: "Lorem ipsum dolor amet",
    icon: schoolIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Vivid Seats
  {
    label: "Vivid Seats",
    coordinate: { lat: 43.64899, lng: -79.38895 },
    description: "Lorem ipsum dolor amet",
    icon: workIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Hivestack
  {
    label: "Hivestack",
    coordinate: { lat: 45.50028, lng: -73.55396 },
    description: "Lorem ipsum dolor amet",
    icon: workIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
  // Concordia
  {
    label: "Concordia University",
    coordinate: { lat: 45.4948, lng: -73.5779 },
    description: "Lorem ipsum dolor amet",
    icon: schoolIcon,
    date: [new Date("2017-09-01"), new Date("2019-06-30")],
  },
];
---

<section
  id="characterHistory"
  class="relative flex min-h-dvh w-full snap-start flex-col gap-6 pt-16 md:h-dvh md:snap-center"
>
  <div class="flex max-h-full items-center justify-center gap-6">
    <div
      class="flex h-fit max-h-full grow flex-col pt-12 max-md:hidden md:max-w-md lg:max-w-2xl"
    >
      <div class="relative">
        <h1
          data-aos="fade-in"
          class="text-primary-500 absolute -top-2 left-1/2 -translate-x-1/2 -translate-y-full text-2xl font-bold"
        >
          Backstory
        </h1>
        <Card animation="zoom-in">
          <Mapbox client:load class="aspect-[4/3] w-full" steps={steps} />
        </Card>
      </div>
      <HistoryMapCard
        data-aos="zoom-in"
        client:load
        class="mt-6 h-64 lg:hidden"
        steps={steps}
      />
    </div>
    <div>
      <h1
        data-aos="fade-in"
        class="text-primary-500 mx-auto text-center text-2xl font-bold md:hidden"
      >
        Backstory
      </h1>
      <HistoryTimeline
        class="my-auto shrink-0 max-md:mx-auto max-md:h-fit max-md:min-h-full max-md:w-full md:-mb-16"
        data-aos="fade-right"
        client:load
        steps={steps}
      />
    </div>
  </div>
  <Scroller
    class="absolute bottom-2 left-1/2 -translate-x-1/2 max-md:hidden"
    data-aos="zoom-in"
    data-aos-offset="-25"
    elementId="characterInventory"
    client:load
  >
    Check my Inventory:
  </Scroller>
</section>
